var q=function(s){function f(a){var c,d=~(a=-32768==a?-32767:a)>>8&128;return d||(a*=-1),256<=(a=32635<a?32635:a)?a=(c=m[a>>8&127])<<4|a>>c+3&15:a>>=4,a^d^85}function h(a){var c=0;128&(a^=85)&&(a&=-129,c=-1);var d=4+((240&a)>>4);return a=4!=d?1<<d|(15&a)<<d-4|1<<d-5:a<<1|1,-8*(0===c?a:-a)}function b(a){var c=a>>8&128;32635<(a=0!=c?-a:a)&&(a=32635);var d=l[(a+=132)>>7&255];return ~(c|d<<4|a>>d+3&15)}function p(a){var c=g[c=(a=~a)>>4&7]+((15&a)<<c+3);return c=0!=(128&a)?-c:c}var m=[1,1,2,2,3,3,3,3,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],j=Object.freeze({encodeSample:f,decodeSample:h,encode:function(a){for(var c=new Uint8Array(a.length),d=0;d<a.length;d++){c[d]=f(a[d])}return c},decode:function(a){for(var c=new Int16Array(a.length),d=0;d<a.length;d++){c[d]=h(a[d])}return c}}),l=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7],g=[0,132,396,924,1980,4092,8316,16764],k=Object.freeze({encodeSample:b,decodeSample:p,encode:function(a){for(var c=new Uint8Array(a.length),d=0;d<a.length;d++){c[d]=b(a[d])}return c},decode:function(a){for(var c=new Int16Array(a.length),d=0;d<a.length;d++){c[d]=p(a[d])}return c}});return s.alaw=j,s.mulaw=k,s}({});function getAudioObj(){return void 0!==window.AudioContext?(console.log("AudioContext"),new window.AudioContext):"undefined"!=typeof webkitAudioContext?(console.log("webkitAudioContext"),new window.webkitAudioContext):void 0!==window.mozAudioContext?(console.log("mozAudioContext"),new window.mozAudioContext):void console.log("NONE OF THEM!")}window.alawmulaw=q;var bitdogAudio={init:function(){this.context||(this.context=getAudioObj()),this.audioStack=[],this.nextTime=0},pcm2wav:function(f,h,k,j){h=h||8000,k=k||16,j=j||1;var d=f.byteLength,g=new ArrayBuffer(44+d),c=new DataView(g);function b(a,i,m){for(var l=0;l<m.length;l++){a.setUint8(i+l,m.charCodeAt(l))}}return b(c,0,"RIFF"),c.setUint32(4,36+d,!0),b(c,8,"WAVE"),b(c,12,"fmt "),c.setUint32(16,16,!0),c.setUint16(20,1,!0),c.setUint16(22,j,!0),c.setUint32(24,h,!0),c.setUint32(28,h*j*(k/8),!0),c.setUint16(32,j*(k/8),!0),c.setUint16(34,k,!0),b(c,36,"data"),c.setUint32(40,d,!0),(16==k?function(a,i,m){m=new Int16Array(m);for(var l=0;l<m.length;l++,i+=2){a.setInt16(i,m[l],!0)}}:8==k?function(a,i,m){m=new Int8Array(m);for(var l=0;l<m.length;l++,i++){a.setInt8(i,m[l],!0)}}:function(a,i,m){m=new Int32Array(m);for(var l=0;l<m.length;l++,i+=4){a.setInt32(i,m[l],!0)}})(c,44,f),c.buffer},scheduleBuffers:function(){var a=this;for(this.context||(this.audioStack=[]);this.audioStack.length;){var b=this.audioStack.shift(),c=this.context.createBufferSource();c.buffer=b,c.connect(this.context.destination),0==this.nextTime&&(this.nextTime=this.context.currentTime+0.01),c.onended=function(){a.scheduleBuffers()},c.start(this.nextTime),this.nextTime+=c.buffer.duration}},destory:function(){this.audioStack=[],delete this.context}};