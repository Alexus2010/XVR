function onLoad(){initDot();initAudioConf()}function initAudioConf(){setTitle(lang.optAudio);getChannelProtocolType(function(a){if(isNVR()){initChannelSelect($("#listCh"),getTotalChannelNum(),function(b){return a[b].enable&&a[b].protocolType==="Private"})}else{if(isXVR()){initChannelSelect($("#listCh"),getTotalChannelNum(),function(b){return(vChannelConfig[b]===0&&a[b].enable&&a[b].protocolType==="Private")||vChannelConfig[b]===1})}}initChannelSelectCb()})}function initChannelSelectCb(){$("#slideInVol").slider({min:0,max:100,slide:function(a,b){$("#iptInVol").val(b.value)}});$("#slideOutVol").slider({min:0,max:100,slide:function(a,b){$("#iptOutVol").val(b.value)}});setEditNumberStyle("#iptInVol",false,function(a,c,b){$("#slideInVol").slider("value",b)});setEditNumberStyle("#iptOutVol",false,function(a,c,b){$("#slideOutVol").slider("value",b)});if(!$("#listCh").val()){return rightPopup(lang.nolimit)}$("#listCh").change(loadSetting).change();$("#btnSave").click(saveSetting)}function loadSetting(){var a=parseInt($(this).val());api.audioEncode(REQUEST_GET,{channel:a},function(e,f){if(e!=CODE_SUCCESS){return rightPopup(lang.optionexception)}if(isXVR()){if(typeof f.inputVolume=="undefined"){$(".J-volume").hide();$(".J-audio-enable").hide()}else{$(".J-volume").show();$(".J-audio-enable").show()}}$(".J-input-mode, .J-encode-type").empty();for(var c=0;c<f.encodeTypeList.length;++c){$(".J-encode-type").append($("<option></option>").val(f.encodeTypeList[c]).html(f.encodeTypeList[c]))}if(typeof f.inputVolume=="undefined"){var b=["AIN","","COAX"],d=[];for(var c=0;c<f.inputModeList.length;c++){var g=b[f.inputModeList[c]];$(".J-input-mode").append($("<option></option>").val(f.inputModeList[c]).html(g))}$(".J-audio-input").hide()}else{$(".J-audio-input").show();var d=[lang.audioModeMic,lang.audioModeSrc];for(var c=0;c<d.length;++c){d[c]&&$(".J-input-mode").append($("<option></option>").val(c).html(d[c]))}}autoFillValue("audio",f)})}function saveSetting(){var a=getMatchValue("audio");a.channel=parseInt($("#listCh").val());loading(true);if(isXVR()){if($(".J-volume").is(":hidden")){objKeyDeal(a,["inputVolume","outputVolume","enable"],true)}}api.audioEncode(REQUEST_SET,a,function(b,c){loading(false);rightPopup(b==CODE_SUCCESS?lang.saved:lang.savedfail)})};